{
    "FriendVisitMain": {
        "doc": "Auto visit friends main entry",
        "recognition": "DirectHit",
        "next": [
            "FriendVisitInit"
        ]
    },
    "FriendVisitInit": {
        "max_hit": 1,
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitResetAction",
        "next": [
            "FriendVisitLoop"
        ]
    },
    "FriendVisitLoop": {
        "recognition": "DirectHit",
        "next": [
            "OnFriendListPage",
            "OpenFriendPanel",
            "CheckMainMenuKey",
            "FriendVisitLoop"
        ]
    },
    "CheckMainMenuKey": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/ProtosyncMenu.png",
                "threshold": 0.3
            }
        },
        "action": {
            "type": "ClickKey",
            "param": {
                "key": 27
            }
        },
        "next": [
            "WaitFriendListButton"
        ]
    },
    "WaitFriendListButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/FriendList.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "DoNothing",
            "param": {}
        },
        "next": [
            "OpenFriendPanel",
            "WaitFriendListButton"
        ]
    },
    "OpenFriendPanel": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/FriendList.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "WaitFriendListPage"
        ]
    },
    "WaitFriendListPage": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/VisitFriend.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "DoNothing",
            "param": {}
        },
        "next": [
            "OnFriendListPage",
            "WaitFriendListPage"
        ]
    },
    "OnFriendListPage": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/VisitFriend.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "DoNothing",
            "param": {}
        },
        "next": [
            "FriendListReady",
            "FriendVisitLoop"
        ]
    },
    "FriendListReady": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/EndVisit.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "DoNothing",
            "param": {}
        },
        "next": [
            "CheckSupportQuota",
            "FriendVisitLoop"
        ]
    },
    "CheckSupportQuota": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitCheckQuotaAction",
        "custom_action_param": {
            "ROI": [
                1224,
                71,
                12,
                16
            ],
            "Expected": "[1-9][0-9]*",
            "Threshold": 0.6,
            "NextOnHit": "SupportScan",
            "NextOnMiss": "CheckIntelQuota"
        },
        "next": [
            "CheckSupportQuota"
        ]
    },
    "CheckIntelQuota": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitCheckQuotaAction",
        "custom_action_param": {
            "ROI": [
                1165,
                71,
                12,
                16
            ],
            "Expected": "[1-9][0-9]*",
            "Threshold": 0.6,
            "NextOnHit": "IntelScan",
            "NextOnMiss": "FirstEntryExitOrEnd"
        },
        "next": [
            "CheckIntelQuota"
        ]
    },
    "FirstEntryExitOrEnd": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitFirstEntryExitAction",
        "custom_action_param": {
            "NextOnElse": "EndVisit"
        },
        "next": [
            "FirstEntryExitOrEnd"
        ]
    },
    "EndVisit": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/EndVisit.png",
                "threshold": 0.9
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "EndVisitConfirm",
            "EndVisit"
        ]
    },
    "EndVisitConfirm": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/Confirm.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        }
    },
    "SupportScan": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitScanAction",
        "custom_action_param": {
            "Mode": "support",
            "Template": "VisitFriends/ProductionAssistAvailable.png",
            "Threshold": 0.8,
            "ROI": [
                0,
                140,
                1280,
                520
            ],
            "MaxScroll": 12,
            "ScrollDy": -240,
            "NextOnHit": "SupportConfirmVisit",
            "NextOnContinue": "SupportScan",
            "NextOnExhaust": "FirstEntryExitOrMain"
        },
        "next": [
            "SupportScan"
        ]
    },
    "SupportConfirmVisit": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/Confirm.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "SupportOpenTerminal",
            "SupportConfirmVisit"
        ]
    },
    "SupportOpenTerminal": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/OpenVisitorTerminal.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "SupportTerminalReady",
            "SupportOpenTerminal"
        ]
    },
    "SupportTerminalReady": {
        "recognition": "Or",
        "any_of": [
            {
                "recognition": {
                    "type": "TemplateMatch",
                    "param": {
                        "template": "VisitFriends/ProductionAssist.png",
                        "threshold": 0.8
                    }
                }
            },
            {
                "recognition": {
                    "type": "TemplateMatch",
                    "param": {
                        "template": "VisitFriends/ClueExchange.png",
                        "threshold": 0.8
                    }
                }
            }
        ],
        "action": "DoNothing",
        "next": [
            "SupportTerminalCheckSupportQuota",
            "SupportTerminalCheckIntelQuota",
            "SupportTerminalExit",
            "SupportTerminalReady"
        ]
    },
    "SupportTerminalCheckSupportQuota": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitCheckQuotaAction",
        "custom_action_param": {
            "ROI": [
                1224,
                71,
                12,
                16
            ],
            "Expected": "[1-9][0-9]*",
            "Threshold": 0.6,
            "NextOnHit": "SupportClickSupportButton",
            "NextOnMiss": "SupportTerminalCheckIntelQuota"
        },
        "next": [
            "SupportTerminalCheckSupportQuota"
        ]
    },
    "SupportClickSupportButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/ProductionAssist.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "SupportClickSupportButton",
            "SupportTerminalCheckIntelQuota",
            "SupportTerminalExit"
        ]
    },
    "SupportTerminalCheckIntelQuota": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitCheckQuotaAction",
        "custom_action_param": {
            "ROI": [
                1165,
                71,
                12,
                16
            ],
            "Expected": "[1-9][0-9]*",
            "Threshold": 0.6,
            "NextOnHit": "SupportClickIntelButton",
            "NextOnMiss": "SupportTerminalExit"
        },
        "next": [
            "SupportTerminalCheckIntelQuota"
        ]
    },
    "SupportClickIntelButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/ClueExchange.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "SupportClickIntelButton",
            "SupportTerminalExit"
        ]
    },
    "SupportTerminalExit": {
        "recognition": "DirectHit",
        "action": "ClickKey",
        "key": 27,
        "next": [
            "SupportLeaveCheck",
            "SupportLeaveWait"
        ]
    },
    "SupportLeaveCheck": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/Leave.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "ClickKey",
            "param": {
                "key": 27
            }
        },
        "next": [
            "FriendVisitLoop"
        ]
    },
    "SupportLeaveWait": {
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "SupportLeaveCheck",
            "FriendVisitLoop"
        ]
    },
    "IntelScan": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitScanAction",
        "custom_action_param": {
            "Mode": "intel",
            "Template": "VisitFriends/ClueExchangeAvailable.png",
            "Threshold": 0.8,
            "ROI": [
                0,
                140,
                1280,
                520
            ],
            "MaxScroll": 12,
            "ScrollDy": -240,
            "NextOnHit": "IntelConfirmVisit",
            "NextOnContinue": "IntelScan",
            "NextOnExhaust": "FirstEntryExitOrMain"
        },
        "next": [
            "IntelScan"
        ]
    },
    "IntelConfirmVisit": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/Confirm.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "IntelOpenTerminal",
            "IntelConfirmVisit"
        ]
    },
    "IntelOpenTerminal": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/OpenVisitorTerminal.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "IntelTerminalReady",
            "IntelOpenTerminal"
        ]
    },
    "IntelTerminalReady": {
        "recognition": "Or",
        "any_of": [
            {
                "recognition": {
                    "type": "TemplateMatch",
                    "param": {
                        "template": "VisitFriends/ProductionAssist.png",
                        "threshold": 0.8
                    }
                }
            },
            {
                "recognition": {
                    "type": "TemplateMatch",
                    "param": {
                        "template": "VisitFriends/ClueExchange.png",
                        "threshold": 0.8
                    }
                }
            }
        ],
        "action": "DoNothing",
        "next": [
            "IntelTerminalCheckIntelQuota",
            "IntelTerminalCheckSupportQuota",
            "IntelTerminalExit",
            "IntelTerminalReady"
        ]
    },
    "IntelTerminalCheckIntelQuota": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitCheckQuotaAction",
        "custom_action_param": {
            "ROI": [
                1165,
                71,
                12,
                16
            ],
            "Expected": "[1-9][0-9]*",
            "Threshold": 0.6,
            "NextOnHit": "IntelClickIntelButton",
            "NextOnMiss": "IntelTerminalCheckSupportQuota"
        },
        "next": [
            "IntelTerminalCheckIntelQuota"
        ]
    },
    "IntelClickIntelButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/ClueExchange.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "IntelClickIntelButton",
            "IntelTerminalCheckSupportQuota",
            "IntelTerminalExit"
        ]
    },
    "IntelTerminalCheckSupportQuota": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitCheckQuotaAction",
        "custom_action_param": {
            "ROI": [
                1224,
                71,
                12,
                16
            ],
            "Expected": "[1-9][0-9]*",
            "Threshold": 0.6,
            "NextOnHit": "IntelClickSupportButton",
            "NextOnMiss": "IntelTerminalExit"
        },
        "next": [
            "IntelTerminalCheckSupportQuota"
        ]
    },
    "IntelClickSupportButton": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/ProductionAssist.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "Click",
            "param": {}
        },
        "next": [
            "IntelClickSupportButton",
            "IntelTerminalExit"
        ]
    },
    "IntelTerminalExit": {
        "recognition": "DirectHit",
        "action": "ClickKey",
        "key": 27,
        "next": [
            "IntelLeaveCheck",
            "IntelLeaveWait"
        ]
    },
    "IntelLeaveCheck": {
        "recognition": {
            "type": "TemplateMatch",
            "param": {
                "template": "VisitFriends/Leave.png",
                "threshold": 0.8
            }
        },
        "action": {
            "type": "ClickKey",
            "param": {
                "key": 27
            }
        },
        "next": [
            "FriendVisitLoop"
        ]
    },
    "IntelLeaveWait": {
        "recognition": "DirectHit",
        "action": "DoNothing",
        "next": [
            "IntelLeaveCheck",
            "FriendVisitLoop"
        ]
    },
    "FirstEntryExitOrMain": {
        "recognition": "DirectHit",
        "action": "Custom",
        "custom_action": "FriendVisitFirstEntryExitAction",
        "custom_action_param": {
            "NextOnElse": "FriendVisitLoop"
        },
        "next": [
            "FirstEntryExitOrMain"
        ]
    }
}
